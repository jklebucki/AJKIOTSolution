<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJKIOT.Web</title>
    <base href="/" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link href="_content/Blazorise.Icons.FontAwesome/v6/css/all.min.css" rel="stylesheet">
    <link href="_content/Blazorise/blazorise.css" rel="stylesheet" />
    <link href="_content/Blazorise.Bootstrap/blazorise.bootstrap.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="AJKIOT.Web.styles.css" rel="stylesheet" />
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>
    <!--<script src="_content/Microsoft.AspNetCore.Components.WebAssembly.Authentication/AuthenticationService.js"></script>-->
    <script>
        window.initializeDial = (dialId, dotNetRef) => {
            const dial = document.getElementById(dialId);
            const knob = dial.querySelector('.knob');
            let isDragging = false;

            function updateKnobPosition(angleDegrees) {
                // PrzeksztaÅ‚Ä‡ kÄ…t w radiany
                const angleRadians = (angleDegrees - 90) * (Math.PI / 180); // Ajust for initial position
                const rect = dial.getBoundingClientRect();
                // Oblicz promieÅ„, jako poÅ‚owÄ™ szerokoÅ›ci dial, minus poÅ‚owa szerokoÅ›ci knob dla Å›rodka
                const radius = rect.width / 2 - knob.offsetWidth / 2;
                // Oblicz nowÄ… pozycjÄ™ X i Y dla knob
                const knobX = radius * Math.cos(angleRadians) + dial.offsetWidth / 2;
                const knobY = radius * Math.sin(angleRadians) + dial.offsetHeight / 2;

                // Zaktualizuj styl, aby przenieÅ›Ä‡ knob do nowej pozycji
                knob.style.left = `${knobX}px`;
                knob.style.top = `${knobY}px`;
            }

            knob.addEventListener('mousedown', () => isDragging = true);

            document.addEventListener('mousemove', (event) => {
                if (isDragging) {
                    const rect = dial.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    const angleRadians = Math.atan2(event.clientY - centerY, event.clientX - centerX);
                    const angleDegrees = angleRadians * (180 / Math.PI) + 90; // Ajust for initial position
                    dotNetRef.invokeMethodAsync('SetRotation', angleDegrees);
                    updateKnobPosition(angleDegrees);
                }
            });

            document.addEventListener('mouseup', () => isDragging = false);
        };
    </script>
    <script src="_framework/blazor.webassembly.js"></script>
</body>

</html>
